<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Russian Roulette Simulator</title>

<style>
body{
  margin:0;
  background:#111;
  color:white;
  font-family:Arial, sans-serif;
  text-align:center;
}

.container{
  margin-top:60px;
}

.gun{
  font-size:120px;
  transition:transform 0.6s ease;
}

.spin{
  transform:rotate(360deg);
}

.recoil{
  transform:translateY(-15px);
}

button{
  padding:15px 40px;
  font-size:20px;
  margin-top:30px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  background:red;
  color:white;
}

button:disabled{
  background:gray;
  cursor:not-allowed;
}

.result{
  font-size:30px;
  margin-top:30px;
  height:40px;
}
</style>
</head>

<body>

<div class="container">
  <h1>ðŸŽ¯ Russian Roulette</h1>
  <div id="gun" class="gun">ðŸ”«</div>
  <button id="triggerBtn" onclick="pullTrigger()">BÃ“P CÃ’</button>
  <div class="result" id="result"></div>
</div>

<script>

let isPlaying = false;
let bulletPosition;
let currentChamber;

// ðŸ”« Ã‚m thanh
const bangSound = new Audio("bang.mp3");
const clickSound = new Audio("click.mp3");

bangSound.preload = "auto";
clickSound.preload = "auto";

// ðŸŽ¯ Reset sÃºng
function resetGun(){
  bulletPosition = Math.floor(Math.random() * 6); // 0-5
  currentChamber = 0;
}

resetGun();

function pullTrigger(){

  if(isPlaying) return;
  isPlaying = true;

  const gun = document.getElementById("gun");
  const result = document.getElementById("result");
  const btn = document.getElementById("triggerBtn");

  btn.disabled = true;
  gun.classList.add("spin");

  setTimeout(()=>{

    if(currentChamber === bulletPosition){

      // ðŸ’¥ Ná»”
      result.innerText = "ðŸ’¥ BANG! Báº¡n Ä‘Ã£ trÃºng Ä‘áº¡n!";
      result.style.color = "red";
      document.body.style.background = "#550000";

      bangSound.currentTime = 0;
      bangSound.play().catch(()=>{});

      gun.classList.remove("spin");
      gun.classList.add("recoil");

      // ðŸ”„ Reset sau khi ná»•
      setTimeout(()=>{
        document.body.style.background = "#111";
        result.innerText = "";
        gun.classList.remove("recoil");
        btn.disabled = false;
        isPlaying = false;
        resetGun();
      },2000);

    } else {

      // ðŸ˜®â€ðŸ’¨ KhÃ´ng ná»•
      result.innerText = "ðŸ˜®â€ðŸ’¨ Click...";
      result.style.color = "lightgreen";

      clickSound.currentTime = 0;
      clickSound.play().catch(()=>{});

      currentChamber++;

      setTimeout(()=>{
        result.innerText = "";
        gun.classList.remove("spin");
        btn.disabled = false;
        isPlaying = false;
      },1000);
    }

  },600);
}

</script>

</body>
</html>
