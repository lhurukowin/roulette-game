<script>

let isPlaying = false;

// ðŸ”Š Audio ná»™i bá»™
const bangSound = new Audio("./bang.mp3");
const clickSound = new Audio("./click.mp3");

bangSound.preload = "auto";
clickSound.preload = "auto";

let audioUnlocked = false;

function unlockAudio() {
  if (audioUnlocked) return;

  bangSound.play().then(() => {
    bangSound.pause();
    bangSound.currentTime = 0;
  }).catch(()=>{});

  clickSound.play().then(() => {
    clickSound.pause();
    clickSound.currentTime = 0;
  }).catch(()=>{});

  audioUnlocked = true;
}

// ðŸŽ¯ Random 1 viÃªn duy nháº¥t
let bulletPosition = Math.floor(Math.random() * 6);
let currentChamber = 0;

document.getElementById("triggerBtn").addEventListener("click", function() {

  unlockAudio(); // ðŸ”“ Ä‘áº£m báº£o audio Ä‘Æ°á»£c unlock

  if(isPlaying) return;
  isPlaying = true;

  const result = document.getElementById("result");
  const btn = document.getElementById("triggerBtn");

  btn.disabled = true;

  setTimeout(()=>{

    if(currentChamber === bulletPosition){

      result.innerText = "ðŸ’¥ BANG!";
      result.style.color = "red";
      document.body.style.background = "#550000";

      bangSound.currentTime = 0;
      bangSound.play();

      // reset sÃºng má»›i
      bulletPosition = Math.floor(Math.random() * 6);
      currentChamber = 0;

    } else {

      result.innerText = "ðŸ˜®â€ðŸ’¨ Click...";
      result.style.color = "lightgreen";

      clickSound.currentTime = 0;
      clickSound.play();

      currentChamber++;
    }

    setTimeout(()=>{
      document.body.style.background = "#111";
      result.innerText = "";
      btn.disabled = false;
      isPlaying = false;
    },1200);

  },300);

});

</script>
